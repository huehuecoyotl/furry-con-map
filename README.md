# furry-con-map
A tool that creates the JSON behind the furry convention map served at [https://coyo.tl/map](https://coyo.tl/map)

## What is the "surprise index"?
The surprise index is a cobbled together way to say how "surprising" a con's success in a location is. The bigger the number, the more surprising. What threshold should be set for "surprising" is purposefully not settled. For example, Biggest Little Fur Con is fairly surprising that it would be so successful in Reno, and in fact it seems like the surprise index should even be higher for it. However, bigger conventions get various bonuses to their surprise index, such that being a bigger convention can help mitigate things like how bad it is for two cons to be in nearby locations or in the same part of the year.

The first important note about the surprise index is how heavily the population of a host city factors in. As a factor, it is the most likely culprit for a high surprise index, compared to other things like geographic or temporal conflicts. This is because the surprise index is quietly making the assumption that a higher population in a host city means better access to the logistics that make a con successful (things like airlift, or convention space). While these things do correlate with population, they're not exact (for example, Las Vegas has the most event space for conventions in the US, despite being significantly smaller than its runner up, Chicago). Be aware that these sorts of things are not captured perfectly by the surprise index.

The surprise index also gives a small bonus to camping conventions, to make them less surprising. Since most camping conventions are located in places with low populations, this is currently achieved by multiplying the population of the host city by a constant factor (currently, 10000), however, this is an imperfect solution and very unscientific.

The surprise index for any convention is calculated as attendance * s / adjusted population. Attendance is as expected, and adjusted population is population of the host city, potentially multiplied by a factor if that convention is a camping convention. S is significantly more complicated, intended to account for conflicts in time and space between conventions.

S is the sum of the ratio between each convention's attendance / (the geographic distance between this con and another con * the temporal distance between this con and another con), for all convention pairs. Both distances are normalized and smoothed. That is, first, they are placed into a range between 0 and 1, so that if two conventions are on opposite sides of the globe, they will get a distance of 1. In this process, if two conventions are on exactly the same day or exactly the same place, instead of becoming 0, they will be a tiny fraction above 0, and all other distances are also slightly closer to 1 than would otherwise be expected; this is done because otherwise we would end up dividing by 0 later on, and this would not create a useful surprise index. The ratio between attendances are designed such that smaller cons will see their s's be larger than larger cons, even when located at the same location on the same day, because the surprise index assumes that any individual would be more likely to go to the larger of two possible conventions given a conflict. Obviously, this assumption is dubious, but on average I think it's not so dubious as to sink the entire surprise index.

If you have any suggestions to alter the surprise index calculation, please feel free to send them my way, but be aware that I cobbled this together and it would probably be pretty easy to come up with a better solution than I did.

## Would you like to help?
Updating the map is as easy as a pull request! Simply add a line to basic_con_data.csv, and your updates can be live quickly and easily. The format of the CSV file is simple. The first column contains the name of the convention. The second, its location (as you'd put into Google Maps or similar). The third and fourth are latitude and longitude, in decimal format; this is a precise GPS location. Typically, the host city is "good enough"; you don't need to specify exactly the location of the hotel. Preferably, though, this would be of the exact town and not the metropolitan area (e.g., MFF is in Rosemont, IL, not Chicago, IL, and the lat/long reflects that). The fifth column is the most recent attendance for a convention (approximate is okay, if no exact figures are available). The sixth column is the start date of the next iteration (in format mm/dd/yyyy) (or, if not yet announced, text explaining when it is expected). The seventh column is the end date of the next iteration (in format mm/dd/yyyy) (or, if not yet announced, a best guess). The eighth column is "1" if a convention is a member of the FCLR, and "0" if not. If you don't know what this means, either see [here](https://fclr.info) or assume that it is not, as the list was initially generated with most of the members of the FCLR in it. The ninth column is the location of the host metropolitan area (e.g. MFF's host metro is Chicago, not Rosemont). The tenth column is the population of this metropolitan area. The eleventh column is "1" if a convention is a camping convention, and "0" otherwise (hotel convention, usually). The twelfth column is the official website for the convention (SHOULD NOT BE A SOCIAL MEDIA ACCOUNT). The data should be sorted alphabetically by convention name. 

To summarize:

Convention Name|Host City|Latitude|Longitude|Attendance|Next Start Date|Next End Date|FCLR Membership|Host Metropolitan Area|Population of Host|Camping|Website
 --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | ---
